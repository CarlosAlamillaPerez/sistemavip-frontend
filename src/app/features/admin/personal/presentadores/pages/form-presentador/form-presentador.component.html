<!-- form-presentador.component.html -->
<div class="container-fluid">
  <!-- Header -->
  <div class="row mb-4 align-items-center">
    <div class="col">
      <div class="d-flex align-items-center gap-2">
        <button class="btn btn-link p-0" (click)="onCancel()">
          <i class="fas fa-arrow-left"></i>
        </button>
        <h2 class="mb-0">{{isEditing ? 'Editar' : 'Nuevo'}} Presentador</h2>
      </div>
    </div>
  </div>
 
  <!-- Card Principal -->
  <div class="card">
    <div class="card-body">
      <!-- Loading -->
      <div class="text-center py-5" *ngIf="loading">
        <div class="spinner-border" role="status">
          <span class="visually-hidden">Cargando...</span>
        </div>
      </div>
 
      <!-- Formulario -->
      <form [formGroup]="presentadorForm" (ngSubmit)="onSubmit()" *ngIf="!loading">
        <div class="row g-3">
          <!-- Información Personal -->
          <div class="col-md-6">
            <label for="nombre" class="form-label">Nombre *</label>
            <input
              type="text"
              class="form-control"
              id="nombre"
              formControlName="nombre"
              [class.is-invalid]="presentadorForm.get('nombre')?.invalid && presentadorForm.get('nombre')?.touched"
            >
            <div class="invalid-feedback">
              El nombre es requerido y debe tener al menos 2 caracteres
            </div>
          </div>
 
          <div class="col-md-6">
            <label for="apellido" class="form-label">Apellido *</label>
            <input
              type="text"
              class="form-control"
              id="apellido"
              formControlName="apellido"
              [class.is-invalid]="presentadorForm.get('apellido')?.invalid && presentadorForm.get('apellido')?.touched"
            >
            <div class="invalid-feedback">
              El apellido es requerido y debe tener al menos 2 caracteres
            </div>
          </div>
 
          <div class="col-md-6">
            <label for="telefono" class="form-label">Teléfono *</label>
            <input
              type="tel"
              class="form-control"
              id="telefono"
              formControlName="telefono"
              [class.is-invalid]="presentadorForm.get('telefono')?.invalid && presentadorForm.get('telefono')?.touched"
            >
            <div class="invalid-feedback">
              Ingrese un número de teléfono válido (10 dígitos)
            </div>
          </div>
 
          <div class="col-md-6">
            <label for="email" class="form-label">Email *</label>
            <input
              type="email"
              class="form-control"
              id="email"
              formControlName="email"
              [class.is-invalid]="presentadorForm.get('email')?.invalid && presentadorForm.get('email')?.touched"
            >
            <div class="invalid-feedback">
              Ingrese un email válido
            </div>
          </div>
 
          <div class="col-md-6">
            <label for="documentoIdentidad" class="form-label">Documento de Identidad *</label>
            <input
              type="text"
              class="form-control"
              id="documentoIdentidad"
              formControlName="documentoIdentidad"
              [class.is-invalid]="presentadorForm.get('documentoIdentidad')?.invalid && presentadorForm.get('documentoIdentidad')?.touched"
              [readonly]="isEditing"
            >
            <div class="invalid-feedback">
              El documento de identidad es requerido y debe tener al menos 5 caracteres
            </div>
          </div>
 
          <div class="col-md-6">
            <label for="porcentajeComision" class="form-label">Porcentaje de Comisión *</label>
            <div class="input-group">
              <input
                type="number"
                class="form-control"
                id="porcentajeComision"
                formControlName="porcentajeComision"
                [class.is-invalid]="presentadorForm.get('porcentajeComision')?.invalid && presentadorForm.get('porcentajeComision')?.touched"
                [readonly]="isEditing"
              >
              <span class="input-group-text">%</span>
              <div class="invalid-feedback">
                El porcentaje debe estar entre 0 y 100
              </div>
            </div>
          </div>
 
          <!-- Password solo en creación -->
          <div class="col-md-12" *ngIf="!isEditing">
            <label for="password" class="form-label">Contraseña *</label>
            <input
              type="password"
              class="form-control"
              id="password"
              formControlName="password"
              [class.is-invalid]="presentadorForm.get('password')?.invalid && presentadorForm.get('password')?.touched"
            >
            <div class="invalid-feedback">
              La contraseña debe tener al menos 8 caracteres, incluir mayúsculas, minúsculas, números y caracteres especiales
            </div>
          </div>
 
          <div class="col-md-12">
            <label for="fotoUrl" class="form-label">URL de Foto</label>
            <input
              type="url"
              class="form-control"
              id="fotoUrl"
              formControlName="fotoUrl"
              [class.is-invalid]="presentadorForm.get('fotoUrl')?.invalid && presentadorForm.get('fotoUrl')?.touched"
            >
          </div>
 
          <div class="col-md-12">
            <label for="notas" class="form-label">Notas</label>
            <textarea
              class="form-control"
              id="notas"
              formControlName="notas"
              rows="3"
            ></textarea>
          </div>
 
          <!-- Botones -->
          <div class="col-12 mt-4">
            <div class="d-flex justify-content-end gap-2">
              <button 
                type="button" 
                class="btn btn-secondary" 
                (click)="onCancel()">
                Cancelar
              </button>
              <button 
                type="submit" 
                class="btn btn-primary" 
                [disabled]="presentadorForm.invalid || loading">
                <span class="spinner-border spinner-border-sm me-1" role="status" aria-hidden="true" *ngIf="loading"></span>
                {{isEditing ? 'Actualizar' : 'Crear'}} Presentador
              </button>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
 </div>